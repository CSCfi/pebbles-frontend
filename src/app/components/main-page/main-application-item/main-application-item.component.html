<ng-container *ngIf="application">
  <mat-card class="card" [attr.id]="'env-'+application.id" ngClass.lt-sm="mobile"
            fxLayout="row" fxLayoutAlign="space-between stretch" fxLayoutGap="20px"
            fxLayout.lt-sm="column" fxLayoutAlign.lt-sm="start stretch" fxLayoutGap.lt-sm="10px">

    <!-- Card LEFT section -->
    <div class="card-media-container bg__primary-light center__vh"
         [ngSwitch]="applicationType"
         [ngClass]="{'jupyter':applicationType==='jupyter', 'rstudio':applicationType==='rstudio'}"
         fxFlex="0 0 125px">
      <div class="thumbnail mat-headline">
        <ng-container *ngSwitchCase="'jupyter'">
          <fa-icon [icon]="faPython" class="md-48"></fa-icon>
          <span>Jupyter</span>
        </ng-container>
        <ng-container *ngSwitchCase="'rstudio'">
          <fa-icon [icon]="faRProject" class="md-48"></fa-icon>
          <span>RStudio</span>
        </ng-container>
        <ng-container *ngSwitchDefault>
          <fa-icon [icon]="faBook" class="md-48"></fa-icon>
        </ng-container>
      </div>
    </div>
    <!-- //// End of Left section -->

    <!-- Card CENTER section -->
    <div class="card-info-container" fxFlex="grow"
         fxLayout="column" fxLayoutAlign="space-between stretch" fxLayoutGap="8px">
      <mat-card-header fxLayout="column" fxLayoutAlign="start stretch" fxLayoutGap.lt-sm="10px">
        <mat-card-title class="application-name mat-title mb-0">
          <span [innerHTML]="application.name"></span>
        </mat-card-title>

        <mat-card-subtitle fxLayout="row wrap" fxLayoutAlign="space-between stretch"
                           fxLayout.lt-sm="column" fxLayoutAlign.lt-sm="start stretch" fxLayoutGap.lt-sm="10px">
          <div class="workspace-name center__v" *ngIf="content.identifier==='catalog'">
            <ng-container *ngIf="application.workspace_name.startsWith('System.') === false; else publicBlock">
              <mat-icon class="project txt__warn md-16 mr-5">group</mat-icon>
              {{ application.workspace_name }}
            </ng-container>
            <ng-template #publicBlock>
              <mat-icon class="public txt__accent md-16 mr-2">public</mat-icon>
              Public
            </ng-template>
          </div>
          <div class="application-meta mat-caption" fxLayout="row" fxLayoutAlign="end" fxLayoutGap="10px"
               fxLayoutAlign.lt-sm="start">
            <div class="volumes center__v">
              <div class="volume center__v mr-10" [ngClass]="{'active':!isPublic}"
                   [matTooltip]="!isPublic ? 'Shared folder available' : 'No shared folder'">
                <mat-icon class="md-16 mr-2" *ngIf="!isPublic; else noSharedVolume">folder</mat-icon>
                <ng-template #noSharedVolume>
                  <mat-icon fontSet="material-icons-outlined" class="md-16 mr-2" *ngIf="isPublic">folder_off</mat-icon>
                </ng-template>
                <span class="heading">shared</span>
              </div>
              <div class="volume center__v" [ngClass]="{'active':!isPublic && isWorkVolumeActive}"
                   [matTooltip]="isWorkVolumeActive ? 'Work folder available' : 'No work folder'">
                <mat-icon class="md-16 mr-2" *ngIf="!isPublic && isWorkVolumeActive ; else noWorkVolume ">folder</mat-icon>
                <ng-template #noWorkVolume>
                  <mat-icon fontSet="material-icons-outlined" class="md-16 mr-2">folder_off</mat-icon>
                </ng-template>
                <span class="heading">my-work</span>
              </div>
            </div>
            <span class="lifetime center__v">
              <mat-icon fontSet="material-icons-outlined" class="md-16 mr-2">watch_later</mat-icon>
              <span class="heading">Lifetime: {{lifetime}}</span>
            </span>
          </div>

        </mat-card-subtitle>
      </mat-card-header>
      <mat-card-content class="mb-5" fxLayout="column" fxLayoutAlign="space-between stretch" fxLayoutGap="8px">
        <div class="description mat-body-1" [innerHTML]="description"></div>
        <div class="chips mat-caption" fxHide.lt-sm="true">
          <ng-container *ngFor="let label of labels.split(',')">
            <span class="chip__sm" [ngClass]="{'self-learning':label.trim()==='self-learning'}">{{ label.trim() }}</span>
          </ng-container>
        </div>
      </mat-card-content>
    </div>
    <!-- //// END of CENTER section-->

    <!-- Card RIGHT section -->
    <mat-card-actions fxFlex="0 0 130px" class="card-action-container center__vh">
      <app-main-session-button [applicationId]="application.id"></app-main-session-button>
    </mat-card-actions>
  </mat-card>
</ng-container>
