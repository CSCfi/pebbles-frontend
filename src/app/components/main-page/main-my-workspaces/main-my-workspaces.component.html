<div class="content-header-container"
     fxLayout="row" fxLayoutAlign="space-between stretch" fxLayoutGap="30px"
     fxLayout.lt-sm="column" fxLayoutAlign.lt-sm="start stretch" fxLayoutGap.lt-sm="10px">
  <app-main-content-header fxFlex="grow"
                           (emitApplyFilter)="applyFilter($event)"
                           [content]="content"
                           [isSearchOn]="true"
                           [isAutocompleteDisabled]="true"
                           [labels]="[]">
  </app-main-content-header>
  <button mat-flat-button fxFlex="0 0 180px" fxFlex.lt-sm="grow"  color="warn" id="join-workspace-button"
          aria-label="Join Workspace"
          (click)="openJoinWorkspaceDialog()">
    <mat-icon fontSet="material-icons-outlined" class="mr-5">group_add</mat-icon>
    Join workspace
  </button>
</div>

<div class="content-container" *ngIf="visibleWorkspaces !== null">

  <div class="action-buttons mt-5">
    <ng-container *ngIf="visibleWorkspaces.length > 0">
      <ng-container *ngIf="isListOpen; else openButtonBlock">
        <button mat-button (click)="closeAll()">
          <mat-icon fontSet="material-icons-outlined">unfold_less</mat-icon>
          Close environment lists
        </button>
      </ng-container>
      <ng-template #openButtonBlock>
        <button mat-button (click)="openAll()">
          <mat-icon fontSet="material-icons-outlined">unfold_more</mat-icon>
          Show environment lists
        </button>
      </ng-template>
    </ng-container>
  </div>

  <section class="workspace-list mt-5" *ngIf="workspaceCount > 0 ; else noMembershipBlock" fxLayout="column"
    fxLayoutAlign="start stretch" fxLayoutGap="5px">
    <ng-container *ngIf="visibleWorkspaces.length > 0; else noWorkspaceBlock">
      <ng-container *ngFor="let workspace of visibleWorkspaces">
        <app-main-workspace-item
          [id]="workspace.id"
          [workspace]="workspace"
          [isNew]="workspace.id === newWorkspaceId">
        </app-main-workspace-item>
      </ng-container>
    </ng-container>
    <ng-template #noWorkspaceBlock>
      <div class="message-container">
        <div class="empty">
          <mat-icon fontSet="material-icons-outlined">search</mat-icon>
          <span class="message">No results were found by search</span>
        </div>
      </div>
    </ng-template>
  </section>

  <ng-template #noMembershipBlock>
    <div class="message-container">
      <div class="empty">
        <mat-icon fontSet="material-icons-outlined">group</mat-icon>
        <span class="message">
          You are currently not a member of any workspace
        </span>
      </div>
    </div>
  </ng-template>
</div>

<div class="message-container">
  <div class="empty" *ngIf="visibleWorkspaces === null">
    <mat-icon fontSet="material-icons-outlined">hourglass_top</mat-icon>
    <span class="message">...Loading...</span>
  </div>
</div>
