<div class="content-header-container"
     fxLayout="row" fxLayoutAlign="space-between stretch" fxLayoutGap="20px"
     fxLayout.lt-sm="column" fxLayoutAlign.lt-sm="start stretch" fxLayoutGap.lt-sm="10px">
  <app-main-content-header fxFlex="grow"
                           (emitApplyFilter)="applyFilter($event)"
                           [context]="context"
                           [isSearchOn]="true"
                           [isAutocompleteDisabled]="true"
                           [labels]="[]">
  </app-main-content-header>
  <div class="action-buttons" fxLayout="row" fxLayoutAlign="space-between stretch" fxLayoutGap="10px">
    <button mat-flat-button id="join-workspace-button" color="accent" fxFlex.lt-sm="grow"
            aria-label="Join Workspace"
            (click)="openJoinWorkspaceDialog()">
      <mat-icon fontSet="material-icons-outlined" class="mr-5">group_add</mat-icon>
      Join workspace
    </button>
    <ng-container *ngIf="visibleWorkspaces?.length > 0">
      <button mat-stroked-button (click)="toggleWorkspaceList()">
        <mat-icon class="material-icons-outlined mr-5">list</mat-icon>
        <ng-container *ngIf="isListOpen; else openButtonBlock">
          <span fxHide.lt-sm="true">Close list</span>
        </ng-container>
        <ng-template #openButtonBlock>
          <span fxHide.lt-sm="true">Open list</span>
        </ng-template>
      </button>
    </ng-container>
  </div>
</div>

<div class="content-container" ngClass.lt-sm="mobile" *ngIf="visibleWorkspaces !== null">
  <section class="workspace-list content-cutout mt-5 mb-30" *ngIf="workspaceCount > 0 ; else noMembershipBlock"
           fxLayout="column" fxLayoutAlign="start stretch" fxLayoutGap="5px">
    <app-message [message]="message"></app-message>
    <ng-container *ngIf="visibleWorkspaces.length > 0; else noWorkspaceBlock">
      <ng-container *ngFor="let workspace of visibleWorkspaces">
        <app-main-workspace-item
          [id]="workspace.id"
          [workspace]="workspace"
          [isNew]="workspace.id === newWorkspaceId"
          [context]="context">
        </app-main-workspace-item>
      </ng-container>
    </ng-container>
    <ng-template #noWorkspaceBlock>
      <div class="message-container">
        <div class="empty-message">
          <mat-icon fontSet="material-icons-outlined" class="md-96">search</mat-icon>
          <span class="message-title">No results were found by search</span>
        </div>
      </div>
    </ng-template>
  </section>

  <ng-template #noMembershipBlock>
    <div class="message-container">
      <div class="empty-message">
        <mat-icon fontSet="material-icons-outlined" class="md-96">group</mat-icon>
        <span class="message-title">
          You are currently not a member of any workspace
        </span>
      </div>
    </div>
  </ng-template>
</div>

<div class="message-container" *ngIf="visibleWorkspaces === null">
  <div class="empty-message">
    <mat-icon fontSet="material-icons-outlined" class="md-96">hourglass_top</mat-icon>
    <span class="message-title">...Loading...</span>
  </div>
</div>
