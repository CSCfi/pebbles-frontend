<div class="content-header-container" fxLayout="row" fxLayoutAlign="space-between start" fxLayoutGap="30px">
  <app-main-content-header fxFlex="grow" (emitApplyFilter)="applyFilter($event)" [content]="content" [isSearchOn]="true"
    [isAutocompleteDisabled]="true" [labels]="[]">
  </app-main-content-header>
  <button mat-button fxFlex="0 0 180px" class="shadow__moderate join-workspace-button" aria-label="Join Workspace"
    matTooltip="Join workspace" (click)="openJoinWorkspaceDialog()">
    <mat-icon class="mr-5">group_add</mat-icon>
    Join workspace
  </button>
</div>

<div class="content-container" *ngIf="workspaces">

  <div class="action-buttons mt-5" *ngIf="workspaceCount>0">
    <ng-container *ngIf="isListOpen; else openButtonBlock">
      <button mat-button (click)="closeAll()">
        <mat-icon>unfold_less</mat-icon>
        Close environment lists
      </button>
    </ng-container>
    <ng-template #openButtonBlock>
      <button mat-button (click)="openAll()">
        <mat-icon>unfold_more</mat-icon>
        Show environment lists
      </button>
    </ng-template>
  </div>

  <section class="workspace-list mt-5" *ngIf="workspaceCount>0 ; else noMembershipBlock" fxLayout="column"
    fxLayoutAlign="start stretch" fxLayoutGap="5px">
    <ng-container *ngIf="workspaces.length > 0; else noWorkspaceBlock">
      <ng-container *ngFor="let workspace of workspaces">
        <app-main-workspace-item
          [id]="workspace.id"
          [workspace]="workspace"
          [isNew]="workspace.id === newWorkspaceId">
        </app-main-workspace-item>
      </ng-container>
    </ng-container>
    <ng-template #noWorkspaceBlock>
      <div class="message-container">
        <div class="empty">
          <mat-icon fontSet="material-icons-outlined">search</mat-icon>
          <span class="message">No results was found by search</span>
        </div>
      </div>
    </ng-template>
  </section>
  <ng-template #noMembershipBlock>
    <div class="message-container">
      <div class="empty">
        <mat-icon fontSet="material-icons-outlined">group</mat-icon>
        <span class="message">You are currently not a member of any workspaces</span>
      </div>
    </div>
  </ng-template>
</div>
