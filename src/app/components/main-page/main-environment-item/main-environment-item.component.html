<ng-container *ngIf="environment">
  <mat-card class="card" [attr.id]="'env-'+environment.id" ngClass.lt-sm="mobile"
            fxLayout="row" fxLayoutAlign="space-between stretch" fxLayoutGap="20px"
            fxLayout.lt-sm="column" fxLayoutAlign.lt-sm="start stretch" fxLayoutGap.lt-sm="10px">

    <!-- Card LEFT section -->
    <div class="card-media-container bg__primary-light center__vh"
         [ngSwitch]="environmentType"
         [ngClass]="{'jupyter':environmentType==='jupyter', 'rstudio':environmentType==='rstudio'}"
         fxFlex="0 0 115px">
      <div class="thumbnail mat-headline">
        <ng-container *ngSwitchCase="'jupyter'">
          <fa-icon [icon]="faPython" class="md-48"></fa-icon>
          <span>Jupyter</span>
        </ng-container>
        <ng-container *ngSwitchCase="'rstudio'">
          <fa-icon [icon]="faRProject" class="md-48"></fa-icon>
          <span>RStudio</span>
        </ng-container>
        <ng-container *ngSwitchDefault>
          <fa-icon [icon]="faBook" class="md-48"></fa-icon>
        </ng-container>
      </div>
    </div>
    <!-- //// End of Left section -->

    <!-- Card CENTER section -->
    <div class="card-info-container" fxFlex="grow"
         fxLayout="column" fxLayoutAlign="space-between stretch" fxLayoutGap="5px">
      <mat-card-header class="" fxLayout="column" fxLayoutAlign="start stretch" fxLayoutGap.lt-sm="10px">
        <mat-card-title class="environment-name mat-title">
          <span [innerHTML]="environment.name"></span>
        </mat-card-title>

        <mat-card-subtitle class="mat-subheading-2" fxLayout="row wrap" fxLayoutAlign="space-between stretch"
                           fxLayout.lt-sm="column" fxLayoutAlign.lt-sm="start stretch" fxLayoutGap.lt-sm="10px">
          <div class="workspace-name mat-subheading-2 center__v">
            <ng-container *ngIf="environment.workspace_name.startsWith('System.') === false; else publicBlock">
              <mat-icon class="project txt__warn md-16 mr-5">group</mat-icon>
              {{ environment.workspace_name }}
            </ng-container>
            <ng-template #publicBlock>
              <mat-icon class="public txt__accent md-16 mr-2">public</mat-icon>
              Public
            </ng-template>
          </div>
          <div class="environment-meta mat-caption" fxLayout="row" fxLayoutAlign="end" fxLayoutGap="10px"
               fxLayoutAlign.lt-sm="start">
            <div class="volumes center__v">
              <div class="volume center__v" [ngClass]="{'active':!isPublic}"
                   [matTooltip]="!isPublic ? 'Shared folder available' : 'No shared folder'">
                <mat-icon class="md-16 mr-5" *ngIf="!isPublic">folder</mat-icon>
                <mat-icon fontSet="material-icons-outlined" class="md-16 mr-5" *ngIf="isPublic">folder</mat-icon>
                <span class="heading mr-10">Shared data</span>
              </div>
              <div class="volume center__v" [ngClass]="{'active':!isPublic && isWorkVolumeActive}"
                   [matTooltip]="isWorkVolumeActive ? 'Work folder available' : 'No work folder'">
                <mat-icon class="md-16 mr-5" *ngIf="!isPublic && isWorkVolumeActive">folder</mat-icon>
                <mat-icon fontSet="material-icons-outlined" class="md-16 mr-5" *ngIf="!isWorkVolumeActive">folder</mat-icon>
                <span class="heading">Work</span>
              </div>
            </div>
            <span class="lifetime center__v">
              <mat-icon fontSet="material-icons-outlined" class="md-16 mr-5">watch_later</mat-icon>
              <span class="heading">Lifetime: {{lifetime}}</span>
            </span>
          </div>

        </mat-card-subtitle>
      </mat-card-header>
      <mat-card-content fxLayout="column" fxLayoutAlign="start stretch" fxLayoutGap="5px">
        <div class="description mat-body-1" [innerHTML]="description"></div>
        <div class="chips mat-caption" fxHide.lt-sm="true">
          <ng-container *ngFor="let label of labels.split(',')">
            <span class="chip__sm">{{ label.trim() }}</span>
          </ng-container>
        </div>
      </mat-card-content>
    </div>
    <!-- //// END of CENTER section-->

    <!-- Card RIGHT section -->
    <mat-card-actions fxFlex="0 0 130px" class="card-action-container center__vh">
      <app-main-session-button [environmentId]="environment.id"></app-main-session-button>
    </mat-card-actions>
  </mat-card>
</ng-container>
