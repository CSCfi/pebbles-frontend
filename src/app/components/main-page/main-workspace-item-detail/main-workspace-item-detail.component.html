<div id="workspace-setting-container" ngClass.gt-xs="p-40" ngClass.lt-sm="p-20"
     fxLayout="column" fxLayoutGap="10px">

  <form [formGroup]="workspaceEditForm" novalidate *ngIf="workspaceEditForm">
    <dl class="workspace-info grid mb-30">
      <dt>
        Workspace name
      </dt>
      <dd>
        <div class="preview" *ngIf="!isWorkspaceNameEditOn" fxLayout="row" fxLayoutAlign="space-between start">
          <p fxFlex="grow">{{ workspace.name }}</p>
          <button mat-icon-button aria-label="edit" *ngIf="isEditable" (click)="editWorkspaceName()">
            <mat-icon fontSet="material-icons-outlined">mode_edit</mat-icon>
          </button>
        </div>
        <mat-form-field appearance="fill" *ngIf="isWorkspaceNameEditOn">
          <input matInput formControlName="name">
        </mat-form-field>
      </dd>
      <dt>
        Workspace description
      </dt>
      <dd>
        <div class="preview" *ngIf="!isWorkspaceDescriptionEditOn" fxLayout="row" fxLayoutAlign="space-between start">
          <p fxFlex="grow" [innerHTML]="workspace.description || 'No description'"></p>
          <button mat-icon-button aria-label="edit" *ngIf="isEditable" (click)="editWorkspaceDescription()">
            <mat-icon fontSet="material-icons-outlined">mode_edit</mat-icon>
          </button>
        </div>
        <mat-form-field appearance="fill" *ngIf="isWorkspaceDescriptionEditOn">
          <textarea matInput formControlName="description"></textarea>
        </mat-form-field>
      </dd>
      <dt class="join-code-title">Join code</dt>
      <dd fxLayout="row" fxLayoutAlign="space-between center">
        <div class="open-join-code-button" fxLayout="row" (click)="openJoinCodeDialog()">
          <mat-icon class="mr-5 txt__primary-light">vpn_key</mat-icon>
          <div class="chip__password center__v"></div>
        </div>
      </dd>
      <dt class="">Created</dt>
      <dd>{{ workspace.create_ts | dateDisplay }}</dd>
      <dt class="">Expiring</dt>
      <dd>{{ workspace.expiry_ts | dateDisplay }}  ({{ workspace.expiry_ts | remainingDaysDisplay }})</dd>
      <dt class="">Memory limit</dt>
      <dd>{{ workspace.memory_limit_gib }} GiB total for concurrent sessions</dd>
    </dl>
    <div fxLayout="column" fxLayoutAlign="start stretch">
      <button mat-flat-button class="workspace-update-button mt-20" color="accent"
              *ngIf="workspace.name!=='System.default'"
              [disabled]="!isWorkspaceFormChanged || !workspaceEditForm.valid" (click)="updateWorkspace()">
        save changes
      </button>
      <button mat-stroked-button class="workspace-edit-cancel-button mt-10" *ngIf="isWorkspaceFormChanged"
              (click)="cancelWorkspaceEditing()">
        cancel changes
      </button>
      <button mat-stroked-button class="workspace-delete-button mt-10" *ngIf="isDeletable"
              (click)="deleteWorkspace()">
        <mat-icon fontSet="material-icons-outlined" class="mr-5">delete_outline</mat-icon>
        delete workspace
      </button>
    </div>
  </form>
</div>

<ng-template #loadingBlock>
  <section class="message-container">
    <div class="empty-message">
      <mat-icon fontSet="material-icons-outlined" class="md-96">hourglass_top</mat-icon>
      <span class="message-title">...Loading...</span>
    </div>
  </section>
</ng-template>
